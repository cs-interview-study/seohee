Event Delegationì˜ ì†ì„±ì„ í™œìš©í•˜ì—¬ Vanila JSë¥¼ êµ¬í˜„í•´ë³´ëŠ” ê³¼ì •ì—ì„œ ì´ë²¤íŠ¸ ë²„ë¸”ë§ê³¼ ìº¡ì³ì— ëŒ€í•œ ì§€ì‹ì´ ì •ë¦¬ê°€ ë˜ì–´ìˆì§€ ì•ŠìŒì„ ëŠê»´ ì´ ê¸€ì„ ì‘ì„±í•˜ê²Œ ë˜ì—ˆë‹¤.

---

# ì´ë²¤íŠ¸ë€?

> í´ë¦­ì´ë‚˜ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ëŠ” ë“± ì‚¬ìš©ìì™€ ì›¹í˜ì´ì§€ê°€ ìƒí˜¸ì‘ìš©í•˜ë©° ë¸Œë¼ìš°ì €ê°€ ê°ì§€í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.

`ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ`, `ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬`ê°€ ë°”ë¡œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒí•  ë•Œ, ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ì´ë©°
ìì£¼ ì‚¬ìš©í•˜ëŠ” `DOM ì´ë²¤íŠ¸`ë¡œ **click, contextmenu, keydown, keyup, focus**ë“±ì´ ìˆë‹¤.

---

# ì´ë²¤íŠ¸ ë“±ë¡

ì•ì„œ ë§í•œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” ì´ë²¤íŠ¸ ë“±ë¡ì´ë¼ëŠ” ì ˆì°¨ê°€ í•„ìš”í•˜ë©°, ëŒ€í‘œì ì¸ í•¨ìˆ˜ê°€ `addEventListener()` ì›¹ APIì´ë‹¤.

ì˜ˆì œ ì½”ë“œë¥¼ ì‚´í´ë³´ì ğŸ‘‡

```js
<input type="checkbox" id="item">
```

```js
let input = document.querySelector("input");
input.addEventListener("click", function () {
  alert("clicked");
});
```

checkboxì˜ íƒ€ì…ì„ ê°€ì§€ê³  ìˆëŠ” input íƒœê·¸ì— 'click'ì´ë¼ëŠ” ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•˜ê³ , í•´ë‹¹ íƒœê·¸ë¥¼ ì„ íƒí•  ë•Œ, ë¸Œë¼ìš°ì €ê°€ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•˜ê³  `alert( )`ì°½ì„ ë„ì›Œì¤€ë‹¤.

ì–´ë–»ê²Œ ë¸Œë¼ìš°ì €ê°€ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•  ìˆ˜ ìˆëŠ” ê±¸ê¹Œ??

---

# Event Bubbling

> íŠ¹ì • í™”ë©´ ìš”ì†Œì—ì„œ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ, í•´ë‹¹ ì´ë²¤íŠ¸ê°€ ë” `ìƒìœ„ì˜ í™”ë©´ ìš”ì†Œ`ë“¤ë¡œ ì „ë‹¬ë˜ì–´ ê°€ëŠ” íŠ¹ì„±ì„ ì˜ë§ˆí•œë‹¤.

- ì—¬ê¸°ì„œ `ìƒìœ„ì˜ í™”ë©´ìš”ì†Œ`ë€?
  HTMLì€ íŠ¸ë¦¬ êµ¬ì¡°ë¥¼ ê°–ê¸° ë•Œë¬¸ì—, ì´ êµ¬ì¡° ìƒì—ì„œ í•œ ë‹¨ê³„ ìœ„ì— ìˆëŠ” ìš”ì†Œë¥¼ ìƒìœ„ìš”ì†Œë¼ê³  ë¶€ë¥´ë©° bodyíƒœê·¸ë¥¼ ìµœìƒìœ„ ìš”ì†Œë¡œ ë¶€ë¥¸ë‹¤.

![](https://images.velog.io/images/seohee0112/post/4f5c5a9c-cef7-440c-904d-687b0c69e5a3/image.png)

ì˜ˆì œ ì½”ë“œë¡œ ì´ë¥¼ íŒŒì•…í•´ë³´ìğŸ‘‡

```html
<body>
  <div class="one">
    <div class="two">
      <div class="three"></div>
    </div>
  </div>
</body>
```

```js
let divs = document.querySelectorAll("div");
divs.forEach(function (div) {
  div.addEventListener("click", function (e) {
    console.log(e.currentTarget.className);
  });
});
```

`<div class="three"><div>`ì„ ì„ íƒí•˜ë©´, **three -> two -> one**ìœ¼ë¡œ ì½˜ì†”ì— ë¡œê·¸ê°€ ì°íŒë‹¤.
ì´ëŠ” ë¸Œë¼ìš°ì €ê°€ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•˜ëŠ” ë°©ì‹ ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” í˜„ìƒì´ë‹¤.

ë¸Œë¼ìš°ì €ëŠ” íŠ¹ì • í™”ë©´ ìš”ì†Œì—ì„œ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ, ê·¸ ì´ë²¤íŠ¸ë¥¼ ìµœìƒìœ„ì— ìˆëŠ” í™”ë©´ ìš”ì†Œê¹Œì§€ ì „ë‹¬ì‹œí‚¤ëŠ” íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆë‹¤.
ë§Œì•½, threeê°€ ì•„ë‹Œ `two`ë¥¼ ì„ íƒí–ˆë‹¤ë©´, **two -> one**ìœ¼ë¡œ ì½˜ì†”ì— ë¡œê·¸ê°€ ì°í ê²ƒì´ë‹¤.

> í•˜ìœ„ìš”ì†Œì—ì„œ ìƒìœ„ ìš”ì†Œë¡œì˜ ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì‹ì„ `ì´ë²¤íŠ¸ ë²„ë¸”ë§`ì´ë¼ê³  í•˜ëŠ” ê²ƒì´ë‹¤.

---

# Event Capturing

> ì´ë²¤íŠ¸ ë²„ë¸”ë§ê³¼ ë°˜ëŒ€ë¡œ ì§„í–‰ë˜ëŠ” ë°©ì‹ì´ `Event Capturting`ì´ë‹¤.

![](https://images.velog.io/images/seohee0112/post/ed4aaa26-d877-4eb5-9a82-5f77cb7bd6b6/image.png)

ì˜ˆì œ ì½”ë“œë¡œ ì´ë¥¼ íŒŒì•…í•´ë³´ìğŸ‘‡

```html
<body>
  <div class="one">
    <div class="two">
      <div class="three"></div>
    </div>
  </div>
</body>
```

```js
let divs = document.querySelectorAll('div');
divs.forEach(function(div){
	div.addEventListener(
      'click',
      function(e){
    	console.log(e.currentTarget.className);
      }),
      true // default ê°’ì€ falseì…ë‹ˆë‹¤.
  );
});
```

`addEventListener( )`ì˜ ë§ˆì§€ë§‰ ì¸ìë¡œ `true`ë¥¼ ì „ë‹¬í•˜ë©´, ì´ë²¤íŠ¸ ìº¡ì²˜ë§ì´ ë°œìƒí•œë‹¤.
ì¦‰, `three`ë¥¼ ì„ íƒí–ˆì„ë•Œ, **one -> two -> three**ìœ¼ë¡œ ì½˜ì†”ì— ë¡œê·¸ê°€ ì°íŒë‹¤.

---

# Event Delegation

ì´ë²¤íŠ¸ ë²„ë¸”ë§ê³¼ ìº¡ì²˜ë§ì„ ì‚¬ìš©í•œ ê°œë…ì´ ì´ë²¤íŠ¸ ìœ„ì„ì´ë‹¤.

> í•˜ìœ„ ìš”ì†Œì— ê°ê° ì´ë²¤íŠ¸ë¥¼ ë¶™ì´ì§€ ì•Šê³ , ìƒìœ„ ìš”ì†Œì—ì„œ í•˜ìœ„ ìš”ì†Œì˜ ì´ë²¤íŠ¸ë“¤ì„ ì œì–´í•˜ëŠ” ë°©ì‹ì´ë‹¤.

### ì˜ˆì œì½”ë“œ

```
<body>
    <h1>ì´ë²¤íŠ¸ ë²„ë¸”ë§ / ìº¡ì³ í•™ìŠµ</h1>
    <ul class="itemList">
      <li>
        <input type="checkbox" id="item1" />
        <label for="item1">ì´ë²¤íŠ¸ ë²„ë¸”ë§ </label>
      </li>
      <li>
        <input type="checkbox" id="item2" />
        <label for="item2">ì´ë²¤íŠ¸ ìº¡ì³ </label>
      </li>
    </ul>
  </body>
```

inputì„ ì„ íƒí–ˆì„ ë•Œ, alertì°½ì´ ëœ¨ê²Œ í•˜ëŠ” ì½”ë“œì´ë‹¤.

```js
let inputs = document.querySelector("input");
inputs.addEventListener("click", function (e) {
  alert("clicked");
});
```

ì—¬ê¸°ì„œ `li` ì— inputê³¼ labelë¥¼ ì¶”ê°€í•˜ì.

```js
let itemList = document.querySelector(".itemList");
let li = document.createElement("li");
let input = document.createElement("input");
let label = document.createElement("label");
let labelText = document.createTextNode("ì´ë²¤íŠ¸ ìœ„ì„ í•™ìŠµ");

input.setAttribute("type", "checkbox");
input.setAttribute("id", "item3");
label.setAttribute("for", "item3");
label.appendChild(labelText);
li.appendChild(input);
li.appendChild(label);
itemList.appendChild(li);
```

í•˜ì§€ë§Œ, ìƒˆë¡œ ì¶”ê°€í•œ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œì—ëŠ” í´ë¦­ ì´ë²¤íŠ¸ê°€ ì‘ë™ë˜ì§€ ì•ŠëŠ”ë‹¤.
ì™œ? ì¸í’‹ ë°•ìŠ¤ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•˜ëŠ” ì‹œì ì— ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œì´ ë‘ ê°œì´ê¸° ë•Œë¬¸ì´ë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” `ì´ë²¤íŠ¸ ìœ„ì„`ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²ƒì´ë‹¤.

í•´ê²°í•œ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.ğŸ‘‡

```js
let itemList = document.querySelector(".itemList");
itemList.addEventListener("click", function (e) {
  alert("clicked");
});
```

í™”ë©´ì˜ ëª¨ë“  ì¸í’‹ ë°•ìŠ¤ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ì‹ ëŒ€ì‹ , ì¸í’‹ ë°•ìŠ¤ì˜ ìƒìœ„ ìš”ì†Œì¸ ulì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë‹¬ì•„ í•˜ìœ„ì—ì„œ ë°œìƒí•œ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

ë‹¤ë§Œ, í•´ë‹¹ì½”ë“œëŠ” inputê³¼ label ë‘˜ ë‹¤ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•˜ë¯€ë¡œ input ë°•ìŠ¤ì˜ ì´ë²¤íŠ¸ì™€ ê°ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” event ê°ì²´ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤.

```js
itemList.addEventListener("click", function (e) {
  if (e.target.tagName === "INPUT") {
    console.log("clicked");
  } else e.preventDefault();
});
```

target.tagNameì„ í™œìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê³ , labelì¼ ê²½ìš° ì´ë²¤íŠ¸ ë°œìƒ ìì²´ë¥¼ ë§‰ëŠ” `e.preventDefault()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤.

---
ğŸ“š í•™ìŠµí•  ë•Œ, ì°¸ê³ í•œ ìë£Œ ğŸ“š

- [ì´ë²¤íŠ¸ ë²„ë¸”ë§, ì´ë²¤íŠ¸ ìº¡ì²˜ ê·¸ë¦¬ê³  ì´ë²¤íŠ¸ ìœ„ì„ê¹Œì§€](https://joshua1988.github.io/web-development/javascript/event-propagation-delegation/)
- [ë²„ë¸”ë§ê³¼ ìº¡ì²˜ë§](https://ko.javascript.info/bubbling-and-capturing)


ğŸ“„ ì˜ˆì œì½”ë“œ ğŸ“„
- [JavaScript - event.html](https://github.com/cs-interview-study/seohee/blob/main/JavaScript/exam/event.html)
